<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
    <script type="text/javascript" src="/js/qrcode.min.js"></script>
	<link rel="icon" type="image/x-icon" href="/favicon.ico">
  </head>
  <body>
    <h1><%= title %></h1>
    <input id="text" type="text" value="" placeholder="请输入内容"/><br />
    <div id="qrcode" style="width:200px; height:200px; margin: 20px auto"></div>
    <script type="text/javascript">
      var qrcode = new QRCode(document.getElementById("qrcode"));

      function makeCode () {		
        var elText = document.getElementById("text");
        
        if (!elText.value) {
          alert("Input a text");
          elText.focus();
          return;
        }
        
        qrcode.makeCode(elText.value);
      }

      // $("#text").
      //   on("blur", function () {
      //     makeCode();
      //   }).
      //   on("keydown", function (e) {
      //     if (e.keyCode == 13) {
      //       makeCode();
      //     }
      //   });
      var input = document.getElementById("text");
      input.addEventListener('blur', function() {
        makeCode();
      }, false);
      input.addEventListener('keydown', function(e) {
        if(e.keyCode == 13) {
          makeCode();
        }
      }, false);
      </script>
  </body>
</html>
